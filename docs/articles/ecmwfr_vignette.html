<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ecmwfr • ecmwfr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="ecmwfr">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ecmwfr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ecmwfr_vignette.html">ecmwfr</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/khufkens/ecmwfr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>ecmwfr</h1>
                        <h4 class="author">Koen Hufkens</h4>
            
            <h4 class="date">2019-01-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/khufkens/ecmwfr/blob/master/vignettes/ecmwfr_vignette.Rmd"><code>vignettes/ecmwfr_vignette.Rmd</code></a></small>
      <div class="hidden name"><code>ecmwfr_vignette.Rmd</code></div>

    </div>

    
    
<p><a href="https://travis-ci.org/khufkens/ecmwfr"><img src="https://travis-ci.org/khufkens/ecmwfr.svg?branch=master" alt="Build Status"></a> <a href="https://www.buymeacoffee.com/H2wlgqCLO" target="_blank"><img src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" alt="Buy Me A Coffee" height="21px"></a></p>
<div id="ecmwfr" class="section level1">
<h1 class="hasAnchor">
<a href="#ecmwfr" class="anchor"></a>ecmwfr</h1>
<p>Programmatic interface to the <a href="https://confluence.ecmwf.int/display/WEBAPI/ECMWF+Web+API+Home">‘ECMWF’ web API services</a>. Allows for easy downloads of ECMWF <a href="https://confluence.ecmwf.int/display/WEBAPI/Access+ECMWF+Public+Datasets">public data</a>.</p>
<div id="setup" class="section level2">
<h2 class="hasAnchor">
<a href="#setup" class="anchor"></a>Setup</h2>
<p>Before starting save your provided ECMWF key to your local keychain. The package does not allow you to use your key inline in scripts to limit security issues when sharing scripts on github or otherwise.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># set a key to the keychain</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="../reference/wf_set_key.html">wf_set_key</a></span>(<span class="dt">email =</span> <span class="st">"john.smith@example.com"</span>, <span class="dt">key =</span> <span class="st">"XXXXXXXXXXXXXXXXXXXXXX"</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># you can retrieve the key using</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw"><a href="../reference/wf_get_key.html">wf_get_key</a></span>(<span class="dt">email =</span> <span class="st">"john.smith@example.com"</span>)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co"># the output should be the key you provided</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co"># "XXXXXXXXXXXXXXXXXXXXXX"</span></a></code></pre></div>
</div>
<div id="listing-ancillary-data" class="section level2">
<h2 class="hasAnchor">
<a href="#listing-ancillary-data" class="anchor"></a>Listing Ancillary data</h2>
<p>You can list ancillary data such as user information, datasets and services using the following calls.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># user info</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="../reference/wf_user_info.html">wf_user_info</a></span>(<span class="dt">email =</span> <span class="st">"john.smith@example.com"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co"># services</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="kw"><a href="../reference/wf_services.html">wf_services</a></span>(<span class="dt">email =</span> <span class="st">"john.smith@example.com"</span>)</a>
<a class="sourceLine" id="cb2-6" data-line-number="6"></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co"># datasets</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="kw"><a href="../reference/wf_datasets.html">wf_datasets</a></span>(<span class="dt">email =</span> <span class="st">"john.smith@example.com"</span>)</a></code></pre></div>
</div>
<div id="data-requests" class="section level2">
<h2 class="hasAnchor">
<a href="#data-requests" class="anchor"></a>Data Requests</h2>
<p>To download data use the wf_request() function, together with your email and a request string syntax <a href="https://confluence.ecmwf.int/display/WEBAPI/Brief+request+syntax#Briefrequestsyntax-Syntax">as documented</a>. Instead of <code>json</code> formatting the function uses a simple <code>R</code> list for all the arguments.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># this is an example of a request</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">my_request &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">stream =</span> <span class="st">"oper"</span>,</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">                  <span class="dt">levtype =</span> <span class="st">"sfc"</span>,</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">                  <span class="dt">param =</span> <span class="st">"165.128/166.128/167.128"</span>,</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">                  <span class="dt">dataset =</span> <span class="st">"interim"</span>,</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">                  <span class="dt">step =</span> <span class="st">"0"</span>,</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">                  <span class="dt">grid =</span> <span class="st">"0.75/0.75"</span>,</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">                  <span class="dt">time =</span> <span class="st">"00/06/12/18"</span>,</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">                  <span class="dt">date =</span> <span class="st">"2014-07-01/to/2014-07-31"</span>,</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">                  <span class="dt">type =</span> <span class="st">"an"</span>,</a>
<a class="sourceLine" id="cb3-11" data-line-number="11">                  <span class="dt">class =</span> <span class="st">"ei"</span>,</a>
<a class="sourceLine" id="cb3-12" data-line-number="12">                  <span class="dt">area =</span> <span class="st">"73.5/-27/33/45"</span>,</a>
<a class="sourceLine" id="cb3-13" data-line-number="13">                  <span class="dt">format =</span> <span class="st">"netcdf"</span>,</a>
<a class="sourceLine" id="cb3-14" data-line-number="14">                  <span class="dt">target =</span> <span class="st">"tmp.nc"</span>)</a>
<a class="sourceLine" id="cb3-15" data-line-number="15"></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co"># an example download using fw_request()</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co"># using the above request list()</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="kw"><a href="../reference/wf_request.html">wf_request</a></span>(</a>
<a class="sourceLine" id="cb3-19" data-line-number="19">  <span class="dt">email =</span> <span class="st">"john.smith@example.com"</span>,</a>
<a class="sourceLine" id="cb3-20" data-line-number="20">  <span class="dt">transfer =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb3-21" data-line-number="21">  <span class="dt">path =</span> <span class="st">"~"</span>,</a>
<a class="sourceLine" id="cb3-22" data-line-number="22">  <span class="dt">request =</span> my_request)</a></code></pre></div>
<p>This operation might take a while. A progress indicator will keep you informed on the status of your request. The download will expire after a default time out of one hour. You will be informed of where to track your job request on <a href="https://apps.ecmwf.int/webmars/joblist/">the ECMWF website</a>, and provided with a download url which can be sued with the <code>wt_transer()</code> funtion to download the data on a later moment. Keep in mind that you can only have 3 active downloads and 20 job items queued!</p>
<p>Once downloaded you can read in the data using the <code>ncdf4</code> or <code>raster</code> packages for post-processing.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#ecmwfr">ecmwfr</a><ul class="nav nav-pills nav-stacked">
<li><a href="#setup">Setup</a></li>
      <li><a href="#listing-ancillary-data">Listing Ancillary data</a></li>
      <li><a href="#data-requests">Data Requests</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Hufkens Koen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
